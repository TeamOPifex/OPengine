varying highp vec2 TexCoordOut; varying highp vec3 NormalOut; varying lowp vec3 TangentOut; uniform sampler2D Texture; uniform sampler2D SpecularTexture; uniform sampler2D NormalTexture; void main() {	mediump vec3 lightPos = vec3(1, -1, -2);	lowp vec3 lightDir = normalize(-lightPos);	lowp vec3 halfVec = normalize(vec3(0, 0, 1) + lightDir);	lowp vec3 biNormal = normalize(cross(NormalOut, TangentOut));	lowp mat3 tanSpace = mat3(TangentOut, biNormal, NormalOut);	lowp vec3 normal = normalize(tanSpace * (texture2D(NormalTexture, TexCoordOut) * 2.0 - 1.0).xyz);	lowp vec4 color = texture2D(Texture, TexCoordOut);	lowp vec4 diffuse = vec4(vec3(dot(lightDir, normal)), 1);	lowp vec4 specular = texture2D(SpecularTexture, TexCoordOut) * pow(dot(halfVec, normal), 64.0);	gl_FragColor = vec4((color.xyz * diffuse.xyz) + specular.xyz, 1);	}
